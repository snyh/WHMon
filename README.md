# 欢迎使用文华教室管理系统
此项目本身是为华中科技大学文化学院所定制的一款教室管理系统

*  可远程操作以便以最快速度解决老师上课时候的电脑操作问题
*  可以批量关机防止通过拉闸断电带来的问题
*  可发送特定消息
*  使用Web作为管理界面,界面样式和文字信息可以定制
*  教室端在安装的时候必须指定管理端的IP地址且只会响应这个IP地址的消息，防止此款
	软件变成木马程序。
*  支持分区管理。
*  支持用户权限分配。

# 使用手册

## 安装程序
1. 教室端使用WHMonInstaller.exe进行安装,安装时候需要指定管理端的IP地址，
	若需要大批量安装可以修改源目录下的src/tool/nsis/whmon.nsi的安装脚本或自行
	编写脚本。
2. 管理界面使用webgui.zip解压之后删除whmon.dat运行即可, whmon.dat内保存了教室
	端的IP和对应名称以及用户权限密码等。 第一次运行会要求设置admin的密码。
3. 高级用户可以使用命令行运行以便进行灵活的管理，webgui.exe的参数如下

		webgui.exe --http-address 绑定的IP地址 --http-port 端口号 --docroot 资源路径

4. 若需要自己定制安装脚本可以参考whmon.nsi之后自行编写,其中server.exe(教室端)支
   持的参数如下

		My Email: snyh1010@gmail.com or snyh@snyh.org
		options:
		  -h [ --help ]         help message
		  -p [ --port ] arg     local listen port (不要修改这个)
		  -i [ --ip ] arg       the ip which may control the app.
								used like this 
								-i 192.168.1.1 -i 192.168.1.2 -i 192.168.1.3 ...
								(接收的管理端的IP地址支持多个IP)
		  -n [ --name ] arg     classroom name (教室名称,如果是静态IP则可在管理端进行修改
		  --install             install this program  (注册相关信息到系统中)
		  --uninstall           uninstall this program  (卸载注册的信息)

## 分区管理:
完成一般操作，通过选择列表里面的节点来发送消息和远程关机.
选择节点的时候，可以通过按住CTRL 或者SHIFT组合键来快速选择。
双击节点时，会动态打开节点的远程连接服务并生成临时密码。
通过选择查看模式或协助模式来确定是否需要控制远程节点。
点击取消之后动态关闭远程节点的远程连接服务以防止恶意连接。
远程查看模式下可以通过面板上部的发送消息、关机、断开连接进行相应操
作。面板下方有全屏模式(部分游览器全屏模式会出现无法使用右键情况，请
使用alt+shit+左键替代，具体情况请参考弹出信息)
离线节点也可进行连接(如果网络状况特别特别糟糕，可能会出现误判 
几率非常小.理论上会出现但至今没有模拟出过)

## 区域设定: (需要有对应权限才会出现此模块)
双击节点进行节点资料修改。 其他功能参考面板上方对应按钮。
状态列动态更新远程节点信息。

## 权限管理:

### 拥有以下功能
1. 修改个人密码;
2. 管理用户权限(超级管理员才会出现此功能);
3. 添加用户、删除用户(超级管理员才会出现此功能);

此系统使用简单的权限管理共三种角色超级管理员、管理员、普通用户

*   其中超级管理员拥有所有权限(但无法修改其他用户密码)
*   管理员可以修改所属区域的节点信息.
*   普通用户只能对节点进行查看(发送信息、关机、远程连接等)无法修改节点信息。
	除了超级管理员其他角色均受所属区域限制。

## 挂机锁功能:
点击面板右上角的倒三角按钮。出现设置挂机锁密码，设置密码后若要继续操作
必须输入设置的临时密码(请不要将此密码设置为用户密码,通过一定手段是可以
在本地找到此密码的) 或F5刷新页面重新登录。


## 定制界面
修改webgui.exe同目录下的whmon.xml里的内容就行了,需要使用utf8编码


## 当前已知BUG:
1. 删除在线的节点之后无法接受节点发现包,服务器必须重启(但可以手动添加此节点，不影响使用)
2. 区域设定部分 区域名如果太多，后面的名称将无法显示(超过差不多30个时)
3. 一定几率出现Wt Internel Error 暂时未找到出错原因，出现时需要F5刷新页面
